** Option A: Lokal (system Python)
Voraussetzungen:
- Python ≥ 3.12 empfohlen (du nutzt lokal sogar 3.14)
- für Math-SVG: =latex= und =dvisvgm= im PATH

Minimal:
#+begin_src bash :results verbatim
python3 -m venv .venv
source .venv/bin/activate
python -m pip install -U pip
python -m pip install flask gunicorn pyyaml
#+end_src

** Option B: Lokal mit =uv=
#+begin_src bash :results verbatim
uv venv
source .venv/bin/activate
uv pip install flask gunicorn pyyaml
#+end_src

** Option C: Container (Podman/Docker)
Du baust ein Image und startest es mit (podman-)compose.
Vorteil: reproduzierbar + kein “Python-Setup” auf dem Host.

*** Build
#+begin_src bash :results verbatim
podman build -t org-viewer:latest -f Containerfile .
#+end_src

*** Run (Compose)
#+begin_src bash :results verbatim
podman-compose up -d
podman logs -f org-viewer
#+end_src

** TLS-Optionen

*** 1) TLS im Container (Gunicorn mit --certfile/--keyfile)
- Cert/Key als Volume nach /certs mounten
- ENV: CERT_FILE und KEY_FILE setzen

*** 2) TLS via Reverse Proxy (empfohlen)
Container läuft HTTP intern, davor Caddy/Nginx/Traefik.

** Math-Cache & Permissions (wichtig!)
Der Renderer schreibt nach =/app/.math-cache=.

Wenn du bind-mountest:
- verwende Podman-Option =:U=, damit Ownership im Container passt
- und bei SELinux =:Z=

Beispiel:
=./.math-cache:/app/.math-cache:rw,Z,U=

Das ist besser als =chmod 777= auf dem Host.
